<head>
  <link rel="stylesheet" type="text/css" href="/css/network.css" />
  <script defer src="/dist/bundle.js"></script>
</head>

<style>

  .draggable {
    position: absolute;
    cursor: move;
    z-index: 1000;
    background-color: lemonchiffon;
    border-radius: 5px;
    padding: 10px;
  }

  .dropdown-content {
    display: none;
    position: absolute;
    z-index: 1;
    border-radius: 5px;
    overflow: auto;
  }

  .dropdown-content button {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    background-color: lavender;
  }

  .dropdown-content button:last-child {
    border-bottom: none;
  }

  .dropdown-content button:hover {
    background-color: rgb(18, 225, 185);
  }

  .dropdown:hover .dropdown-content {
    display: block;
  }
</style>

<%- include('./partials/header') %>

<div class="network-container"></div>

  <div id="network-data" style="display: none">
    <%= JSON.stringify(networksData) %>
  </div>

<div id="edit-menu">
  <ul class="edit-list">
    <li class="edit-item">
      <label for="selected-colour">Colour</label>
      <input type="color" value="#12ffb9" id="selected-colour">
    </li>
    <li class="edit-item">
      <label for="selected-node-size-slider">Node Size</label>
      <input type="range" min="5" max="30" value="5" id="selected-node-size-slider">
      <input type="number" min="5" max="30" value="5" id="selected-node-size-numeric">
    </li>
    <li class="edit-item">
      <label for="selected-node-links">Node Link Colour</label>
      <input type="color" value="#FFFFFF" id="selected-node-links">
    </li>
    <li class="edit-item">
      <button type="button" id="selected-reset-button">Reset to Default</button>
    </li>
  </ul>
</div>

<script>
  dragElement(document.getElementById("dropDownDiv"));
  
  function dragElement(elmnt) {
    let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
    elmnt.onmousedown = dragMouseDown;
  
    function dragMouseDown(e) {
      e = e || window.event;
      e.preventDefault();
      pos3 = e.clientX;
      pos4 = e.clientY;
      document.onmouseup = closeDragElement;
      document.onmousemove = elementDrag;
    }
  
    function elementDrag(e) {
      e = e || window.event;
      e.preventDefault();
      pos1 = pos3 - e.clientX;
      pos2 = pos4 - e.clientY;
      pos3 = e.clientX;
      pos4 = e.clientY;

      let newTop = elmnt.offsetTop - pos2;
      let newLeft = elmnt.offsetLeft - pos1;

      if (newTop < 0) newTop = 0;
      if (newLeft < 0) newLeft = 0;
      if (newTop > window.innerHeight - elmnt.offsetHeight) newTop = window.innerHeight - elmnt.offsetHeight;
      if (newLeft > window.innerWidth - elmnt.offsetWidth) newLeft = window.innerWidth - elmnt.offsetWidth;

      elmnt.style.top = newTop + "px";
      elmnt.style.left = newLeft + "px";
    }
  
    function closeDragElement() {
      document.onmouseup = null;
      document.onmousemove = null;
    }
  }
</script>

